<button type="button" id="makePostBtn" class="btn btn-outline-primary btns btn-lg">Add a new post!</button>

<div>
  {{#each array}}
  <div>
     <h2>{{this.Title}}</h2>
     <h3>{{this.Destination}}</h3>
     <h4>Number of desired people: {{this.Num_of_ppl}}</h4>
     <img  src={{this.Picture}}> </img>
  </div>
  {{/each}}
</div>

<div class="modal fade" id="makePostModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Make a new post!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="/list-creation" method="POST">
          <div class="form-group">
            <label for="Title">Title: </label>
            <input type="text" min="1" class="form-control" name="Title" id="Title", value="{{Title}}"/>
          </div>
            <div class="form-group">
              <label for="Destination">Destination: </label>
              <input type="text" class="form-control" name="Destination" id="Destination", value="{{Destination}}"/>
            </div>
            <div class="form-group">
              <label for="Num_of_ppl">Number of desired people: </label>
              <input type="number" min="1" class="form-control" name="Num_of_ppl" id="Num_of_ppl", value="{{Num_of_ppl}}"/>
            </div>
            <div class="form-group">
              <label for="From">From: </label>
              <input type="date" class="form-control" name="From" id="From", value="{{From}}">
            </div>
            <div class="form-group">
              <label for="To">To: </label>
              <input type="date" class="form-control" name="To" id="To", value="{{To}}">
            </div>
            <div class="form-group">
              <label for="Picture">Upload picture: </label>
              <input type="file", id="Picture", name="Picture", onchange="xmTanUploadImg(this)", accept="image/*", value="{{Picture}}"/>
              <img id="Img"/>
            </div>
            
            <div class="form-group">
              <label for="Description">Description: </label>
              {{!-- <input type="textarea" class="form-control" name="Description" id="Description", value="{{Description}}"> --}}
              <textarea name="Description", id="Description", class="form-control", cols="30", rows="5",  value="{{Description}}"></textarea>
            </div>
            <button type="submit" class="btn btn-primary" id="makeNewPost">Submit!</button>
          </form>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script>
   $('#makePostBtn').on('click', function(evt){
      evt.preventDefault();
      $('#makePostModal').modal('show');
   });
    $("#To").change(function(){
      var this_time=$('#From').val();
     var this_datetime=new Date(this_time);
      var that_time=$('#To').val();
      var that_datetime=new Date(that_time);
     if(this_datetime>that_datetime){
       alert("From date should be before To date");
       $("#To").val("");
       $("#From").val("");
            }
    });

    function xmTanUploadImg(obj) {
        var file = obj.files[0];
        var reader = new FileReader();
        
        reader.onload = function (e) {
            console.log("成功读取....");
            var img = document.getElementById("Img");
            img.src = e.target.result;
            
        }
        reader.readAsDataURL(file)
    }
  
</script>
